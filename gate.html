<!-- é˜²çˆ¬ + ç¼“å­˜æ§åˆ¶ -->
<meta name="robots" content="noindex, nofollow">
<meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate, max-age=0">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">

<!-- åˆå§‹ï¼šæ—  data-gate å±æ€§æ—¶ï¼Œä¸€å¾‹éšè—ï¼ˆåŒ…å« deny/ok ä¹‹å¤–çš„æ‰€æœ‰æƒ…å†µï¼‰ -->
<style>
  html:not([data-gate]) { visibility: hidden !important; }
</style>

<script>
(function () {
  // ===== é…ç½® =====
  var PASSWORD    = "mimacuowu";    // æ­£ç¡®å¯†ç 
  var TRIES       = 3;              // å°è¯•æ¬¡æ•°
  var LOCK_MIN    = 0;              // å¤±è´¥åé”å®šåˆ†é’Ÿ
  var STORE_KEY   = "page_gate_v3"; // å­˜å‚¨keyï¼ˆç‰ˆæœ¬å·æ›´æ–°ï¼Œé¿å…æ—§æ•°æ®å¹²æ‰°ï¼‰
  var REDIRECT_TO = "/";            // é”™è¯¯æ—¶è·³è½¬åœ°å€

  // å¤„ç†æµè§ˆå™¨å›é€€ç¼“å­˜ï¼šä»å†å²è¿”å›æ—¶å¼ºåˆ¶åˆ·æ–°ï¼Œç¡®ä¿é‡æ–°æ‰§è¡Œ gate
  window.addEventListener("pageshow", function (e) {
    if (e.persisted) location.reload();
  });

  function denyAndRedirect(msg){
    // æ ‡è®°ä¸º denyï¼Œè§£é™¤éšè—ï¼ˆè®©æç¤ºå¯è§ï¼‰
    document.documentElement.setAttribute('data-gate','deny');
    // ç”¨ document.open/write è¦†ç›–åŸ DOMï¼Œæœç»ä»»ä½•å·²æ¸²æŸ“çš„å†…å®¹æ®‹ç•™
    var html =
      "<h2 style='text-align:center;margin-top:20%;color:#c00;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;'>"
      + "â›” Access Denied â›”<br>" + msg + "<br><br>"
      + "Redirecting to homepage in 3 secondsâ€¦</h2>";
    document.open(); document.write(html); document.close();
    setTimeout(function(){ location.href = REDIRECT_TO; }, 3000);
  }

  // è¯»å–å¤±è´¥çŠ¶æ€
  var now = Date.now();
  var failData = { count: 0, lockedUntil: 0 };
  try { failData = JSON.parse(localStorage.getItem(STORE_KEY)) || failData; } catch(e){}

  // é”å®šæœŸï¼šç›´æ¥æ‹’ç»
  if (now < failData.lockedUntil) {
    denyAndRedirect("This page is temporarily locked. Please try again later.");
    return;
  }

  // é‡ç½®è®¡æ•°
  failData.count = 0;
  localStorage.setItem(STORE_KEY, JSON.stringify(failData));

  // å£ä»¤å°è¯•
  var ok = false;
  for (var i = 0; i < TRIES; i++) {
    var left = (TRIES - i);
    var input = prompt("ğŸ”’ This page is restricted. (" + left + " attempt" + (left>1?"s":"") + " left)");
    if (input === null) break; // å–æ¶ˆ
    if (input === PASSWORD) { ok = true; break; }
  }

  if (!ok) {
    // è®°é”å®šå¹¶æ‹’ç»
    failData.lockedUntil = now + LOCK_MIN * 60 * 1000;
    localStorage.setItem(STORE_KEY, JSON.stringify(failData));
    denyAndRedirect("Access denied.");
    return;
  }

  // âœ… æˆåŠŸï¼šå…è®¸æ˜¾ç¤ºé¡µé¢
  document.documentElement.setAttribute('data-gate','ok');
})();
</script>
